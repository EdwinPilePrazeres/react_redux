(this.webpackJsonpreact_redux=this.webpackJsonpreact_redux||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),i=n.n(r),s=n(7),a=n.n(s),o=(n(14),n(4)),d=n(2),u=n(8),l=(n(15),function(e){return Object(c.jsx)("div",{className:"card",children:e.children})}),j=(n(16),function(){return Object(c.jsxs)("div",{className:"lds-ring",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}),b=(n(17),i.a.memo((function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),i=n[0],s=n[1],a=Object(r.useState)(""),o=Object(d.a)(a,2),u=o[0],b=o[1];console.log("RENDERING INGREDIENT FORM");return Object(c.jsx)("section",{className:"ingredient-form",children:Object(c.jsx)(l,{children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onAddIngredient({title:i,amount:u})},children:[Object(c.jsxs)("div",{className:"form-control",children:[Object(c.jsx)("label",{htmlFor:"title",children:"Name"}),Object(c.jsx)("input",{type:"text",id:"title",value:i,onChange:function(e){s(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-control",children:[Object(c.jsx)("label",{htmlFor:"amount",children:"Amount"}),Object(c.jsx)("input",{type:"number",id:"amount",value:u,onChange:function(e){b(e.target.value)}})]}),Object(c.jsxs)("div",{className:"ingredient-form__actions",children:[Object(c.jsx)("button",{type:"submit",children:"Add Ingredient"}),e.loading&&Object(c.jsx)(j,{})]})]})})})}))),O=(n(18),function(e){return console.log("RENDERING INGREDIENTLIST"),Object(c.jsxs)("section",{className:"ingredient-list",children:[Object(c.jsx)("h2",{children:"Loaded Ingredients"}),Object(c.jsx)("ul",{children:e.ingredients.map((function(t){return Object(c.jsxs)("li",{onClick:e.onRemoveItem.bind(undefined,t.id),children:[Object(c.jsx)("span",{children:t.title}),Object(c.jsxs)("span",{children:[t.amount,"x"]})]},t.id)}))})]})}),h=(n(19),i.a.memo((function(e){return Object(c.jsxs)(i.a.Fragment,{children:[Object(c.jsx)("div",{className:"backdrop",onClick:e.onClose}),Object(c.jsxs)("div",{className:"error-modal",children:[Object(c.jsx)("h2",{children:"An Error Occurred!"}),Object(c.jsx)("p",{children:e.children}),Object(c.jsx)("div",{className:"error-modal__actions",children:Object(c.jsx)("button",{type:"button",onClick:e.onClose,children:"Okay"})})]})]})}))),f={loading:!1,error:null,data:null,extra:null,identifier:null},x=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null,data:null,extra:null,identifier:t.identifier};case"RESPONSE":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,data:t.responseData,extra:t.extra});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return f;default:throw new Error("Should not be reached!")}},m=function(){var e=Object(r.useReducer)(x,f),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(r.useCallback)((function(){return c({type:"CLEAR"})}),[]),s=Object(r.useCallback)((function(e,t,n,r,i){c({type:"SEND",identifier:i}),fetch(e,{method:t,body:n,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){c({type:"RESPONSE",responseData:e,extra:r})})).catch((function(e){c({type:"ERROR",errorMessage:"Something went wrong!"})}))}),[]);return{isLoading:n.loading,data:n.data,error:n.error,sendRequest:s,reqExtra:n.extra,reqIdentifer:n.identifier,clear:i}},g=(n(20),i.a.memo((function(e){var t=e.onLoadIngredients,n=Object(r.useState)(""),i=Object(d.a)(n,2),s=i[0],a=i[1],o=Object(r.useRef)(),u=m(),j=u.isLoading,b=u.data,O=u.error,f=u.sendRequest,x=u.clear;return Object(r.useEffect)((function(){var e=setTimeout((function(){if(s===o.current.value){var e=0===s.length?"":'?orderBy="title"&equalTo="'.concat(s,'"');f("https://react-hooks-update-e-default-rtdb.firebaseio.com/ingredients.json"+e,"GET")}}),500);return function(){clearTimeout(e)}}),[s,o,f]),Object(r.useEffect)((function(){if(!j&&!O&&b){var e=[];for(var n in b)e.push({id:n,title:b[n].title,amount:b[n].amount});t(e)}}),[b,j,O,t]),Object(c.jsxs)("section",{className:"search",children:[O&&Object(c.jsx)(h,{onClose:x,children:O}),Object(c.jsx)(l,{children:Object(c.jsxs)("div",{className:"search-input",children:[Object(c.jsx)("label",{children:"Filter by Title"}),j&&Object(c.jsx)("span",{children:"Loading..."}),Object(c.jsx)("input",{ref:o,type:"text",value:s,onChange:function(e){return a(e.target.value)}})]})})]})}))),E=function(e,t){switch(t.type){case"SET":return t.ingredients;case"ADD":return[].concat(Object(u.a)(e),[t.ingredient]);case"DELETE":return e.filter((function(e){return e.id!==t.id}));default:throw new Error("Should not get there!")}},p=function(){var e=Object(r.useReducer)(E,[]),t=Object(d.a)(e,2),n=t[0],i=t[1],s=m(),a=s.isLoading,u=s.error,l=s.data,j=s.sendRequest,f=s.reqExtra,x=s.reqIdentifer,p=s.clear;Object(r.useEffect)((function(){a||u||"REMOVE_INGREDIENT"!==x?a||u||"ADD_INGREDIENT"!==x||i({type:"ADD",ingredient:Object(o.a)({id:l.name},f)}):i({type:"DELETE",id:f})}),[l,f,x,a,u]);var v=Object(r.useCallback)((function(e){i({type:"SET",ingredients:e})}),[]),N=Object(r.useCallback)((function(e){j("https://react-hooks-update-e-default-rtdb.firebaseio.com/ingredients.json","POST",JSON.stringify(e),e,"ADD_INGREDIENT")}),[j]),R=Object(r.useCallback)((function(e){j("https://react-hooks-update-e-default-rtdb.firebaseio.com/ingredients/".concat(e,".json"),"DELETE",null,e,"REMOVE_INGREDIENT")}),[j]),I=Object(r.useMemo)((function(){return Object(c.jsx)(O,{ingredients:n,onRemoveItem:R})}),[n,R]);return Object(c.jsxs)("div",{className:"App",children:[u&&Object(c.jsx)(h,{onClose:p,children:u}),Object(c.jsx)(b,{onAddIngredient:N,loading:a}),Object(c.jsxs)("section",{children:[Object(c.jsx)(g,{onLoadIngredients:v}),I]})]})},v=i.a.createContext({isAuth:!1,login:function(){}}),N=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),i=n[0],s=n[1];return Object(c.jsx)(v.Provider,{value:{login:function(){s(!0)},isAuth:i},children:e.children})},R=(n(21),function(e){var t=Object(r.useContext)(v);return Object(c.jsx)("div",{className:"auth",children:Object(c.jsxs)(l,{children:[Object(c.jsx)("h2",{children:"You are not authenticated!"}),Object(c.jsx)("p",{children:"Please log in to continue."}),Object(c.jsx)("button",{onClick:function(){t.login()},children:"Log In"})]})})}),I=function(e){var t=Object(r.useContext)(v),n=Object(c.jsx)(R,{});return t.isAuth&&(n=Object(c.jsx)(p,{})),n};a.a.render(Object(c.jsx)(N,{children:Object(c.jsx)(I,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.f0a592ab.chunk.js.map